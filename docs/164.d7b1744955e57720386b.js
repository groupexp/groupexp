(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[164],{1164:(t,i,e)=>{"use strict";e.d(i,{Z:()=>k});var n=e(5917),c=(()=>(function(t){t["Autom\xf3vil"]="directions_car",t.Bicicleta="directions_bike",t["A pie"]="directions_walk",t.Correr="directions_run",t.Motocicleta="two_wheeler"}(c||(c={})),c))(),a=e(7716),o=e(2238),r=e(1095);let s=(()=>{class t{constructor(t){this.dialogRef=t}ngOnInit(){}close(t){this.dialogRef.close(t)}}return t.\u0275fac=function(i){return new(i||t)(a.Y36(o.so))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-confirmation"]],decls:10,vars:0,consts:[[1,"row"],[1,"actions"],["mat-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(a.TgZ(0,"h1"),a._uU(1,"Confirmaci\xf3n"),a.qZA(),a.TgZ(2,"div",0),a._uU(3," \xbfEst\xe1s seguro que quer\xe9s cancelar la actividad?\n"),a.qZA(),a.TgZ(4,"div",1),a.TgZ(5,"button",2),a.NdJ("click",function(){return i.close(!0)}),a._uU(6,"S\xed"),a.qZA(),a._uU(7," \xa0 "),a.TgZ(8,"button",3),a.NdJ("click",function(){return i.close(!1)}),a._uU(9,"No"),a.qZA(),a.qZA())},directives:[r.lW],styles:[".actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),t})();var u=e(3224),l=e(4655),d=e(8060),p=e(3071),g=e(8583),m=e(171),h=e(3738),Z=e(6627);function f(t,i){1&t&&(a.TgZ(0,"div",2),a.TgZ(1,"h1"),a._uU(2,"Ups, no hay actividades disponibles"),a.qZA(),a.TgZ(3,"h2"),a.TgZ(4,"a",3),a._uU(5,"Organicemos una!"),a.qZA(),a.qZA(),a.qZA())}function v(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"button",12),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().$implicit;return a.oxw(2).eliminar(i.uid)}),a.TgZ(1,"mat-icon"),a._uU(2,"delete"),a.qZA(),a.qZA()}}function A(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"button",13),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().$implicit;return a.oxw(2).navigate(i.uid)}),a.TgZ(1,"mat-icon"),a._uU(2),a.qZA(),a._uU(3),a.qZA()}if(2&t){const t=a.oxw().$implicit,i=a.oxw(2);a.Q6J("disabled",i.checkParticipant(t)),a.xp6(2),a.Oqu(i.checkParticipant(t)?"check":"add"),a.xp6(1),a.hij(" ",i.checkParticipant(t)?"Participando":"Participar"," ")}}function x(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().$implicit;return a.oxw(2).navigate(i.uid)}),a.TgZ(1,"mat-icon"),a._uU(2,"edit"),a.qZA(),a._uU(3," Editar "),a.qZA()}}const _=function(t){return{"justify-content":t}};function q(t,i){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"mat-card"),a.TgZ(2,"mat-card-header",5),a.NdJ("click",function(){const i=a.CHM(t).$implicit;return a.oxw(2).navigate(i.uid)}),a.TgZ(3,"mat-card-title"),a.TgZ(4,"mat-icon"),a._uU(5),a.qZA(),a._uU(6),a.qZA(),a.TgZ(7,"mat-card-subtitle"),a.TgZ(8,"mat-icon"),a._uU(9,"person"),a.qZA(),a._uU(10),a.qZA(),a.TgZ(11,"mat-card-subtitle",6),a.TgZ(12,"div",7),a.TgZ(13,"mat-icon"),a._uU(14,"event"),a.qZA(),a._uU(15),a.ALo(16,"date"),a.qZA(),a.TgZ(17,"div",7),a.TgZ(18,"mat-icon"),a._uU(19,"schedule"),a.qZA(),a._uU(20),a.qZA(),a.qZA(),a._UZ(21,"mat-card-subtitle"),a.qZA(),a.TgZ(22,"mat-card-content"),a._uU(23),a.qZA(),a.TgZ(24,"mat-card-actions",8),a.YNc(25,v,3,0,"button",9),a.YNc(26,A,4,3,"button",10),a.YNc(27,x,4,0,"button",11),a.qZA(),a.qZA(),a.BQk()}if(2&t){const t=i.$implicit,e=a.oxw(2);a.xp6(5),a.Oqu(e.ICONS[t.meanOfTransportation.toString()]),a.xp6(1),a.hij(" ",t.title," "),a.xp6(4),a.AsE(" ",t.creators[0].name," ",t.creators[0].surname," "),a.xp6(5),a.hij(" ",a.lcZ(16,11,t.startDate)," "),a.xp6(5),a.hij(" ",t.startTime," "),a.xp6(3),a.hij(" ",t.description," "),a.xp6(1),a.Q6J("ngStyle",a.VKq(13,_,t.isOwner?"space-between":"flex-end")),a.xp6(1),a.Q6J("ngIf",t.isOwner),a.xp6(1),a.Q6J("ngIf",!t.isOwner),a.xp6(1),a.Q6J("ngIf",t.isOwner)}}function T(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"button",12),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().$implicit;return a.oxw(2).eliminar(i.uid)}),a.TgZ(1,"mat-icon"),a._uU(2,"delete"),a.qZA(),a.qZA()}}function w(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"button",13),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().$implicit;return a.oxw(2).navigate(i.uid)}),a.TgZ(1,"mat-icon"),a._uU(2),a.qZA(),a._uU(3),a.qZA()}if(2&t){const t=a.oxw().$implicit,i=a.oxw(2);a.Q6J("disabled",i.checkParticipant(t)),a.xp6(2),a.Oqu(i.checkParticipant(t)?"check":"add"),a.xp6(1),a.hij(" ",i.checkParticipant(t)?"Participando":"Participar"," ")}}function b(t,i){if(1&t){const t=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().$implicit;return a.oxw(2).navigate(i.uid)}),a.TgZ(1,"mat-icon"),a._uU(2,"edit"),a.qZA(),a._uU(3," Editar "),a.qZA()}}function U(t,i){if(1&t){const t=a.EpF();a.ynx(0),a.TgZ(1,"mat-card"),a.TgZ(2,"mat-card-header",5),a.NdJ("click",function(){const i=a.CHM(t).$implicit;return a.oxw(2).navigate(i.uid)}),a.TgZ(3,"mat-card-title"),a.TgZ(4,"mat-icon"),a._uU(5),a.qZA(),a._uU(6),a.qZA(),a.TgZ(7,"mat-card-subtitle"),a.TgZ(8,"mat-icon"),a._uU(9,"person"),a.qZA(),a._uU(10),a.qZA(),a.TgZ(11,"mat-card-subtitle",6),a.TgZ(12,"div",7),a.TgZ(13,"mat-icon"),a._uU(14,"event"),a.qZA(),a._uU(15),a.ALo(16,"date"),a.qZA(),a.TgZ(17,"div",7),a.TgZ(18,"mat-icon"),a._uU(19,"schedule"),a.qZA(),a._uU(20),a.qZA(),a.qZA(),a._UZ(21,"mat-card-subtitle"),a.qZA(),a.TgZ(22,"mat-card-content"),a._uU(23),a.qZA(),a.TgZ(24,"mat-card-actions",8),a.YNc(25,T,3,0,"button",9),a.YNc(26,w,4,3,"button",10),a.YNc(27,b,4,0,"button",11),a.qZA(),a.qZA(),a.BQk()}if(2&t){const t=i.$implicit,e=a.oxw(2);a.xp6(5),a.Oqu(e.ICONS[t.meanOfTransportation.toString()]),a.xp6(1),a.hij(" ",t.title," "),a.xp6(4),a.AsE(" ",t.creators[0].name," ",t.creators[0].surname," "),a.xp6(5),a.hij(" ",a.lcZ(16,11,t.startDate)," "),a.xp6(5),a.hij(" ",t.startTime," "),a.xp6(3),a.hij(" ",t.description," "),a.xp6(1),a.Q6J("ngStyle",a.VKq(13,_,t.isOwner?"space-between":"flex-end")),a.xp6(1),a.Q6J("ngIf",t.isOwner),a.xp6(1),a.Q6J("ngIf",!t.isOwner),a.xp6(1),a.Q6J("ngIf",t.isOwner)}}function O(t,i){if(1&t&&(a.ynx(0),a.TgZ(1,"mat-expansion-panel"),a.TgZ(2,"mat-expansion-panel-header"),a.TgZ(3,"mat-panel-title"),a._uU(4,"Actividades seg\xfan mis medios de movilidad"),a.qZA(),a.qZA(),a.YNc(5,q,28,15,"ng-container",4),a.qZA(),a.TgZ(6,"mat-expansion-panel"),a.TgZ(7,"mat-expansion-panel-header"),a.TgZ(8,"mat-panel-title"),a._uU(9,"Otras actividades"),a.qZA(),a.qZA(),a.YNc(10,U,28,15,"ng-container",4),a.qZA(),a.BQk()),2&t){const t=a.oxw();a.xp6(5),a.Q6J("ngForOf",t.myActivities),a.xp6(5),a.Q6J("ngForOf",t.otherActivities)}}let k=(()=>{class t{constructor(t,i,e,a,o){this.activitiesService=t,this.router=i,this.authService=e,this.userService=a,this.matDialog=o,this.ICONS=c,this.activitiesLoaded$=(0,n.of)(!0),this.showPanels=!1,this.loggedUserName=e.getLoggedUserName()}ngOnInit(){this.uid=this.authService.getUserId(),this.userService.getUser(this.uid).subscribe(t=>{this.loggedUser=t.user,this._activitiesSubscription=this.activitiesService.getAll().subscribe(t=>{this.activities=t,this.myActivities=this.getMyActivities(),this.otherActivities=this.getOtherActivities(),this.sortActivities(),this.checkOwner(),this.checkExipired(),this.activitiesLoaded$=(0,n.of)(0===this.activities.length),this.showPanels=!0})})}getOtherActivities(){return this.activities.filter(t=>void 0===this.loggedUser.meansOfTransportation.find(i=>i.name===t.meanOfTransportation))}getMyActivities(){return this.activities.filter(t=>void 0!==this.loggedUser.meansOfTransportation.find(i=>i.name===t.meanOfTransportation))}checkExipired(){this.activities=this.activities.filter(t=>new Date(t.startDate).toLocaleDateString()>=(new Date).toLocaleDateString())}sortActivities(){this.activities.sort((t,i)=>t.startDate<i.startDate?-1:1)}checkOwner(){this.activities.forEach(t=>{t.isOwner=void 0!==t.creators.find(t=>t.uid===this.uid)})}checkParticipant(t){return void 0!==t.participants.find(t=>t.uid===this.uid)}eliminar(t){this.matDialog.open(s).afterClosed().subscribe(i=>{i&&this.activitiesService.delete(t).subscribe(()=>{window.location.reload()})})}ngOnDestroy(){this._activitiesSubscription.unsubscribe()}navigate(t){this.router.navigate(["actividad/ver",t])}}return t.\u0275fac=function(i){return new(i||t)(a.Y36(u._),a.Y36(l.F0),a.Y36(d.e),a.Y36(p.K),a.Y36(o.uw))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-participar"]],decls:3,vars:4,consts:[["class","m-5",4,"ngIf"],[4,"ngIf"],[1,"m-5"],["routerLink","/actividad/organizar"],[4,"ngFor","ngForOf"],[3,"click"],[1,"when"],[1,"icon-time"],[3,"ngStyle"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(a.YNc(0,f,6,0,"div",0),a.ALo(1,"async"),a.YNc(2,O,11,2,"ng-container",1)),2&t&&(a.Q6J("ngIf",a.lcZ(1,2,i.activitiesLoaded$)),a.xp6(2),a.Q6J("ngIf",i.showPanels))},directives:[g.O5,l.yS,m.ib,m.yz,m.yK,g.sg,h.a8,h.dk,h.n5,Z.Hw,h.$j,h.dn,h.hq,g.PC,r.lW],pipes:[g.Ov,g.uU],styles:["mat-card[_ngcontent-%COMP%]{margin:2vw}mat-card-actions[_ngcontent-%COMP%]{flex-direction:row}mat-card-actions[_ngcontent-%COMP%], mat-card-subtitle.when[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.icon-time[_ngcontent-%COMP%]{align-content:space-around}.empty[_ngcontent-%COMP%], .icon-time[_ngcontent-%COMP%]{display:flex;align-items:center}.empty[_ngcontent-%COMP%]{flex-direction:column}"]}),t})()},3224:(t,i,e)=>{"use strict";e.d(i,{_:()=>o});var n=e(8002),c=e(7716),a=e(1841);let o=(()=>{class t{constructor(t){this.httpClient=t,this._controllerName="activities"}getAll(){return this.httpClient.get(this._controllerName).pipe((0,n.U)(t=>t.activities))}get(t){return this.httpClient.get(`${this._controllerName}/${t}`)}save(t){return this.httpClient.post(`${this._controllerName}`,t).pipe((0,n.U)(t=>t.title))}update(t){return this.httpClient.patch(`${this._controllerName}/${t.uid}`,t)}delete(t){return this.httpClient.delete(`${this._controllerName}/${t}`)}disparticipate(t){}}return t.\u0275fac=function(i){return new(i||t)(c.LFG(a.eN))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);