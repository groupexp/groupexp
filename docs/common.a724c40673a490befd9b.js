(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[592],{982:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ContactosModule:()=>M});var o=n(8583),a=n(4872),r=n(3679),c=n(4655),i=n(7716),s=n(8060),l=n(1841);let u=(()=>{class t{constructor(t){this.http=t,this._controllerName="users"}get(t){return this.http.get(`${this._controllerName}/${t}/contacts`)}add(t,e){return this.http.post(`${this._controllerName}/${t}/contacts`,{email:e})}remove(t,e){return this.http.delete(`${this._controllerName}/${t}/contacts/${e}`)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(l.eN))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),d=(()=>{class t{constructor(t,e){this.authService=t,this.contactosService=e}resolve(t,e){const n=this.authService.getUserId();return this.contactosService.get(n)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(s.e),i.LFG(u))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=n(3071);let p=(()=>{class t{constructor(t){this.usuariosService=t}resolve(t,e){return this.usuariosService.getAll()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(m.K))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=n(9761),f=n(8002),g=n(6332),v=n(6324),Z=n(3738),C=n(8295),A=n(9983),x=n(1554),w=n(1095),S=n(6627),_=n(2458),y=n(2789),b=n(1436);function O(t,e){if(1&t&&(i.TgZ(0,"mat-option",10),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.Q6J("value",t.email),i.xp6(1),i.AsE(" ",t.name," ",t.surname," ")}}function U(t,e){1&t&&i._UZ(0,"th",19)}function k(t,e){if(1&t&&(i.TgZ(0,"td",20),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.xp6(1),i.AsE(" ",t.name," ",t.surname,"")}}function T(t,e){1&t&&i._UZ(0,"th",19)}function N(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"td",21),i.TgZ(1,"button",22),i.NdJ("click",function(){const e=i.CHM(t).$implicit;return i.oxw(2).remove(e)}),i.TgZ(2,"mat-icon"),i._uU(3,"delete"),i.qZA(),i.qZA(),i.qZA()}}function q(t,e){1&t&&i._UZ(0,"tr",23)}function Y(t,e){if(1&t&&(i.TgZ(0,"mat-card",11),i.TgZ(1,"mat-card-header"),i.TgZ(2,"mat-card-title"),i._uU(3,"Mis usuarios frecuentes"),i.qZA(),i.qZA(),i.TgZ(4,"table",12),i.ynx(5,13),i.YNc(6,U,1,0,"th",14),i.YNc(7,k,2,2,"td",15),i.BQk(),i.ynx(8,16),i.YNc(9,T,1,0,"th",14),i.YNc(10,N,4,0,"td",17),i.BQk(),i.YNc(11,q,1,0,"tr",18),i.qZA(),i.qZA()),2&t){const t=i.oxw();i.xp6(4),i.Q6J("dataSource",t.contacts),i.xp6(7),i.Q6J("matRowDefColumns",t.displayedColumns)}}const J=[{path:"contactos",component:(()=>{class t{constructor(t,e,n,o){this.route=t,this.contactosService=e,this.authService=n,this.snackBarService=o,this.displayedColumns=["nombreApellido","acciones"],this.myControl=new r.NI}ngOnInit(){this._userId=this.route.snapshot.params.id,this.users=this.route.snapshot.data[g.p.USUARIOS].users.filter(t=>t.uid!==this.authService.getUserId()),this.contacts=this.route.snapshot.data[g.p.CONTACTOS].contacts,this.filteredOptions=this.myControl.valueChanges.pipe((0,h.O)(""),(0,f.U)(t=>this._filter(t)))}_filter(t){const e=t.toLowerCase();return this.users.filter(t=>t.name.toLowerCase().includes(e))}onSelectionChange(t){this.selectedOption=t.option.value}agregarContacto(){this.contactosService.add(this.authService.getUserId(),this.selectedOption).subscribe(t=>{this.snackBarService.openSnackBar("Usuario frecuente agregado!",!0),this.contacts=t.user.contacts})}remove(t){const e=this.authService.getLoggedUser();this.contactosService.remove(e.uid,t.id).subscribe(t=>{this.snackBarService.openSnackBar("Usuario frecuente eliminado!",!0),this.contacts=t.contacts})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(c.gz),i.Y36(u),i.Y36(s.e),i.Y36(v.c))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-agregar"]],decls:15,vars:6,consts:[[1,"row","justify-content-center","padding-top-15","padding-left-50","example-card","padding-bottom"],[1,"example-card"],[1,"example-form"],["appearance","fill",1,"example-full-width"],["autocomplete","off","type","text","matInput","","placeholder","Nombre",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","button","mat-icon-button","",3,"click"],["class","example-card mt-2",4,"ngIf"],[3,"value"],[1,"example-card","mt-2"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","nombreApellido"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","acciones"],["mat-cell","","class","header-align-right",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"header-align-right"],["matTooltip","Eliminar","mat-icon-button","",3,"click"],["mat-row",""]],template:function(t,e){if(1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"h1"),i._uU(2,"Agregar usuario frecuente"),i.qZA(),i.TgZ(3,"mat-card",1),i.TgZ(4,"form",2),i.TgZ(5,"mat-form-field",3),i._UZ(6,"input",4),i.TgZ(7,"mat-autocomplete",5,6),i.NdJ("optionSelected",function(t){return e.onSelectionChange(t)}),i.YNc(9,O,2,3,"mat-option",7),i.ALo(10,"async"),i.qZA(),i.qZA(),i.TgZ(11,"button",8),i.NdJ("click",function(){return e.agregarContacto()}),i.TgZ(12,"mat-icon"),i._uU(13,"add"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.YNc(14,Y,12,2,"mat-card",9),i.qZA()),2&t){const t=i.MAs(8);i.xp6(6),i.Q6J("formControl",e.myControl)("matAutocomplete",t),i.xp6(3),i.Q6J("ngForOf",i.lcZ(10,4,e.filteredOptions)),i.xp6(5),i.Q6J("ngIf",e.contacts.length)}},directives:[Z.a8,r._Y,r.JL,C.KE,A.Nt,r.Fj,x.ZL,r.JJ,r.oH,x.XC,o.sg,w.lW,S.Hw,o.O5,_.ey,Z.dk,Z.n5,y.BZ,y.w1,y.fO,y.Dz,y.nj,y.ge,y.ev,b.gM,y.Gk],pipes:[o.Ov],styles:["table[_ngcontent-%COMP%]{width:100%}.header-align-right[_ngcontent-%COMP%]{display:flex;padding:21px 0;justify-content:flex-end}.example-card[_ngcontent-%COMP%]{max-width:90vw}.padding-bottom[_ngcontent-%COMP%]{padding-bottom:4vh}@media only screen and (max-width: 768px) and (max-height: 882px){table[_ngcontent-%COMP%]{width:80vw}.header-align-right[_ngcontent-%COMP%]{display:flex;padding:21px 0;justify-content:flex-end}.example-card[_ngcontent-%COMP%]{width:100vw}.padding-bottom[_ngcontent-%COMP%]{padding-bottom:4vh}}"]}),t})(),resolve:{ContactsResolver:d,UsersResolver:p}}];let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[c.Bz.forChild(J)],c.Bz]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[o.ez,I,a.q,r.UX]]}),t})()}}]);